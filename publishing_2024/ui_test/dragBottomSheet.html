<!DOCTYPE html>
<html lang="ko">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="format-detection" content="telephone=no">
	<title>drag bottomsheet</title>

	<!-- Publishing CSS -->
	<link rel="stylesheet" href="resource/css/ui_plugin.css">
	<link rel="stylesheet" href="resource/css/ui_style.css">
	<link rel="stylesheet" href="resource/css/ui_test_2024.css"><!-- 테스트용 css -->

	<!-- Publishing JS -->
	<script src="resource/js/jquery-3.6.0.min.js"></script>
	<script src="resource/js/jquery-ui-1.12.1.min.js"></script>
	<!-- <script src="resource/js/ui_plugin.js"></script> -->
	<!-- <script src="resource/js/ui_common.js"></script> -->
	<script src="resource/js/ui_test_2024.js"></script><!-- 테스트용 js -->
</head>
<body id="layoutBody">
<div id="layoutContent" class="layout">
    <div id="headerLay" class="header">
        <div id="btnHeaderlogo" class="header_logo headerMain">
            NH농협캐피탈
        </div>
    </div>
	<div class="container">
		<!-- 여기부터 컨텐츠 -->
		<div class="contents_area product-intro"><!-- 상품소개 구분 class -->
			<div class="contents">				
				<div class="section desc-area">
                    <p>내용</p>
                    <p>내용</p>
                    <p>내용</p>
                    <p>내용</p>
                    <p>내용</p>
                    <p>내용</p>
                    <p>내용</p>
                    <p>내용</p>
                    <p>내용</p>
                    <p>내용</p>
                    <p>내용</p>
                    <p>내용</p>
                    <p>내용</p>
                    <p>내용</p>
                </div>
				<div class="section dragging-bs">
                    <div class="drag-handle">
						<button type="button" class="btn-handle"></button>
					</div>
					<ul class="product-intro-list">
						<li class="product-intro-item">이거는요</li>
						<li class="product-intro-item">이거는요</li>
						<li class="product-intro-item">이거는요</li>
						<li class="product-intro-item">이거는요</li>
					</ul>
                </div>
			</div>
		</div>
		<!-- //여기까지 컨텐츠 -->
	</div>
</div>


<script>
	var wH = $(window).height();
    // var hH = $('.header').outerHeight();
    // var upH = $('.desc-area').outerHeight();
    // var bsH = wH - (hH + upH);

    // console.log('화면 높이 : ', wH);
    // console.log('헤더 높이 : ', hH);
    // console.log('상단 높이 : ', upH);
    // console.log('바텀 높이 : ', wH - (hH + upH));

    // $('.dragging-bs').height(bsH);

    var bottomSheet = $('.dragging-bs');
    var draghandle = $('.drag-handle');
    var bottomTouchStart = 0;
    var bottomScrollStart;
	var lastTouch = 0;

    // 체크 조건은 두가지 => 위로 올린 경우, 아래로 내린 경우 => e.clientY 전, 후 값 비교

    // 초기 터치
    draghandle.on('touchstart', function(e){
        bottom_touch_start = e.touches[0].pageY;
        // console.log('초기터치 : ', bottom_touch_start)
    });

    //핸들을 터치한 경우 => 바텀시트 up
    draghandle.on('touchmove', function(e){
        // console.log('num 1 : ', e.touches[0].pageY - bottom_touch_start) // 올릴땐 마이너스, 내릴땐 플러스
        // console.log('num 2 : ', bottom_touch_start - e.touches[0].pageY) // 올릴땐 플러스, 내릴땐 마이너스

		lastTouch = e.touches[0].pageY;
    });

	draghandle.on('touchend', function(e){
        if((bottom_touch_start - lastTouch) > 0){// up, 플러스
            // console.log('열림', lastTouch);
            bottomSheet.animate({
                'height' : 600
            }, 200);
        }else if((bottom_touch_start - lastTouch) < 0){// down, 마이너스
            // console.log('접힘');
            bottomSheet.animate({
                'height' : 300
            }, 200);
        }
    });






	// $('body').on("touchstart", function (e) {
	// 	console.log('touchstart : ',  e.touches[0].pageY)
	// })

	// $('body').on("touchmove", function (e) {
	// 	console.log('touchmove : ',  e.touches[0].pageY)
	// })

	// $('body').on("touchend", function (e) {
	// 	console.log('touchend : ')
	// })
</script>

</body>
</html>